<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Your Page Title</title>
    <!-- Link to CSS stylesheet -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>
<body>

  <canvas id="canvas"></canvas>
<!-- Offcanvas Trigger (can be removed since it's triggered by JS) -->
<!-- <a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">Link with href</a> -->
<!-- <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">Button with data-bs-target</button> -->

<!-- Offcanvas Structure -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasExampleLabel">Offcanvas</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
      <div>
          Some text as placeholder. In real life, you can have the elements you have chosen: text, images, lists, etc.
      </div>
      <div class="dropdown mt-3">
          <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
              Dropdown button
          </button>
          <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Action</a></li>
              <li><a class="dropdown-item" href="#">Another action</a></li>
              <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
      </div>
  </div>
</div>

      <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
      <script src="https://unpkg.com/@rive-app/canvas@2.20.0"></script>
      <script src="./index.js"></script>
      <script>
      document.addEventListener('DOMContentLoaded', () => {
  const svg = document.getElementById("arab-world");

  // Check if the SVG element is found
  if (!svg) {
    console.error('SVG element not found');
    return;
  }

  // Create an empty dictionary to store the bounding box sizes
  const countryBoundingBoxes = {};

  // Select all path elements (countries) inside the SVG
  const countryPaths = svg.querySelectorAll('path');  // This works for inline SVG

  // Loop through each country path to calculate and store bounding box size
  countryPaths.forEach(path => {
    // Get the bounding box of the current path element
    const bbox = path.getBBox();

    // Store the bounding box in the dictionary with country ID as the key
    countryBoundingBoxes[path.id] = {
      x: bbox.x,
      y: bbox.y,
      width: bbox.width,
      height: bbox.height
    };
  });
  
  
  
  
  
  
  // Print the dictionary to the console
  console.log(countryBoundingBoxes);
});

        const eg = $('#canvas > #eg');
        const canvas = document.getElementById("canvas");
        const context = canvas.getContext("2d");

// Set canvas size and account for device pixel ratio
const scale = window.devicePixelRatio;  // Detect high-DPI
canvas.width = window.innerWidth * scale;
canvas.height = window.innerHeight * scale;
context.scale(scale, scale)
        const r = new rive.Rive({
            src: "./untitled (2).riv",
            canvas: canvas,
            autoplay: true,
            stateMachines: "State Machine 1",
            onLoad: (_) => {
              // const inputs =;
              r.resizeDrawingSurfaceToCanvas();
              const offcanvasElement = document.getElementById('offcanvasExample');
        const offcanvas = new bootstrap.Offcanvas(offcanvasElement);
              
        const countryData = {
            'Kuwait': {
                name: 'Kuwait',
                description: 'Kuwait is a country in the Middle East.',
                flagUrl: 'https://flagcdn.com/w320/kw.png',
                additionalInfo: 'Additional information about Kuwait...',
            },
            'Oman': {
                name: 'Oman',
                description: 'Oman is a country on the southeastern coast of the Arabian Peninsula.',
                flagUrl: 'https://flagcdn.com/w320/om.png',
                additionalInfo: 'Additional information about Oman...',
            },
            // Add more countries here as needed
        };
        
        const inputs = r.stateMachineInputs('State Machine 1');
              canvas.addEventListener("pointerdown", (event) => {
                inputs.forEach((input) => {
        // Check the current input value (e.g., if it's a boolean input related to a specific country)
        console.log(input.name, input.value);

        // Example: Check if the input represents a country, for example 'onKuwait'
        if (input.name === 'onKw' && input.value === true) {
            offcanvas.show();
            // Perform any action related to Kuwait here (e.g., navigate to a new page)
        }
    });
  // console.log(x >= kw.x && x <= kw.x + kw.width && y >= kw.y && event.offsetY <= y + kw.height)
  //               // console.log(inputs);
              });

            }
        });
        console.log(r.inputs);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </body>
</html>
