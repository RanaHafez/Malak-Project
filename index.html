<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Your Page Title</title>
    <!-- Link to CSS stylesheet -->
    <link rel="stylesheet" href="index.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <section id="heading">
      <header class="p-3 text-bg-light">
        <div class="container">
          <div
            class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"
          >
            <a
              href="/"
              class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none"
            >
              <img width="30px" src="./square.png" />
            </a>
            </div>
            <!-- 
            <ul
              class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0"
            >
              <li><a href="#" class="nav-link px-2 text-secondary">Home</a></li>
              <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
              <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
              <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
              <li><a href="#" class="nav-link px-2 text-white">About</a></li>
            </ul>

            <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
              <input
                type="search"
                class="form-control form-control-dark text-bg-dark"
                placeholder="Search..."
                aria-label="Search"
              />
            </form> -->

            <div class="text-end">
            </div>
          </div>
        </div>
      </header>
    </section>
    <section id="landing">
      <div class="landing-box position-relative overflow-hidden  p-3 p-md-5 m-md-3 text-center">
        <div class="col-md-6 p-lg-5 mx-auto my-5">
          <h1 class="display-3 fw-bold">الدول العربية</h1>
          <h4 class="fw-normal text-muted mb-3">ناك حقيقة مثبتة منذ زمن طويل وهي أن المحتوى المقروء لصفحة ما سيلهي القارئ عن التركيز على الشكل الخارجي للنص أو شكل توضع الفقرات في الصفحة التي يقرأها. ولذلك يتم استخدام طريقة لوريم إيبسوم لأنها تعطي توزيعاَ طبيعياَ -إلى حد ما- للأحرف عوضاً عن استخدام "هنا يوجد محتوى نصي، هنا يوجد محتوى نصي" فء.</h4>
          <div class="d-flex gap-3 justify-content-center lead fw-normal">
            <a class="icon-link" href="#map">
              انظر الخريطة
              <svg class="bi"><use xlink:href="#chevron-right"></use></svg>
            </a>
          </div>
        </div>
        <div class="product-device shadow-sm d-none d-md-block"></div>
        <div class="product-device product-device-2 shadow-sm d-none d-md-block"></div>
      </div>
    </section>
<section id="map">
  <canvas id="canvas"></canvas>
</section>
<section>
  <footer class="py-3 my-1">
    <p class="text-center text-body-secondary">© 2025 Malak ❤️ By Rana</p>
  </footer>
</section>
    <!-- Offcanvas Trigger (can be removed since it's triggered by JS) -->
    <!-- <a class="btn btn-primary" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">Link with href</a> -->
    <!-- <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">Button with data-bs-target</button> -->

    <!-- Offcanvas Structure -->
    <div
      class="offcanvas offcanvas-start"
      tabindex="-1"
      id="offcanvasExample"
      aria-labelledby="offcanvasExampleLabel"
    >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">Offcanvas</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="offcanvas"
          aria-label="Close"
        ></button>
      </div>
      <div class="offcanvas-body">
        <div>
          Some text as placeholder. In real life, you can have the elements you
          have chosen: text, images, lists, etc.
        </div>
        <div class="dropdown mt-3">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            data-bs-toggle="dropdown"
          >
            Dropdown button
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/@rive-app/canvas@2.20.0"></script>
    <script src="./index.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {});

      const canvas = document.getElementById("canvas");
      const context = canvas.getContext("2d");

      const r = new rive.Rive({
        src: "./map-arab.riv",
        canvas: canvas,
        autoplay: true,
        stateMachines: "State Machine 1",
        onLoad: (_) => {
          // const inputs =;
          r.resizeDrawingSurfaceToCanvas();
          renderCanvas();
          const offcanvasElement = document.getElementById("offcanvasExample");
          const offcanvas = new bootstrap.Offcanvas(offcanvasElement);

          const countryData = {
            Kuwait: {
              name: "Kuwait",
              description: "Kuwait is a country in the Middle East.",
              flagUrl: "https://flagcdn.com/w320/kw.png",
              additionalInfo: "Additional information about Kuwait...",
            },
            Oman: {
              name: "Oman",
              description:
                "Oman is a country on the southeastern coast of the Arabian Peninsula.",
              flagUrl: "https://flagcdn.com/w320/om.png",
              additionalInfo: "Additional information about Oman...",
            },
            // Add more countries here as needed
          };

          const inputs = r.stateMachineInputs("State Machine 1");
          canvas.addEventListener("pointerdown", (event) => {
            inputs.forEach((input) => {
              // Check the current input value (e.g., if it's a boolean input related to a specific country)
              console.log(input.name, input.value);
              const baseURL = "";
              // Example: Check if the input represents a country, for example 'onKuwait'
              if (input.name === "onMA" && input.value === true) {
                // offcanvas.show();
                window.location.href = `${baseURL}/country.html?country=ma`;
                // Perform any action related to Kuwait here (e.g., navigate to a new page)
              } else if (input.name === "onLY"  && input.value === true) {
                window.location.href = `${baseURL}/country.html?country=ly`;
              } else if (input.name === "onTN" && input.value === true) {
                window.location.href = `${baseURL}/country.html?country=tn`;
              } else if (input.name === "onMR" && input.value === true) {
                window.location.href = `${baseURL}/country.html?country=mr`;
              } else if (input.name === "onDZ" && input.value === true){
                window.location.href = `${baseURL}/country.html?country=dz`;
              } else if (input.name === "onSD" && input.value === true){
                window.location.href = `${baseURL}/country.html?country=sd`;
              } else if (input.name === "onDJ" && input.value === true){
                window.location.href = `${baseURL}/country.html?country=dj`;
              }
            });

            // console.log(x >= kw.x && x <= kw.x + kw.width && y >= kw.y && event.offsetY <= y + kw.height)
            //               // console.log(inputs);
          });
        },
      });
      // Canvas size
      // const resizeCanvas = () => {
      //   const pixelRatio = window.devicePixelRatio || 1;
      //   canvas.width = window.innerWidth * pixelRatio;
      //   canvas.height = window.innerHeight * pixelRatio;
      //   context.scale(pixelRatio, pixelRatio);
      // };
      // resizeCanvas();
      // window.addEventListener("resize", resizeCanvas);
      // Transformation state
      let scale = 1;
      let translateX = 0;
      let translateY = 0;
      let isPanning = false;
      let startX = 0;
      let startY = 0;

      // Function to render with transformations
      const renderCanvas = () => {
        context.save();
        context.clearRect(0, 0, canvas.width, canvas.height);

        // Apply transformations
        context.translate(translateX, translateY);
        context.scale(scale, scale);

        // Let Rive draw the current frame
        r.drawFrame();

        context.restore();
      };

      // Zoom handlers
      const zoomIn = () => {
        scale = Math.min(scale + 0.1, 5); // Max zoom
        renderCanvas();
      };

      const zoomOut = () => {
        scale = Math.max(scale - 0.1, 0.5); // Min zoom
        renderCanvas();
      };

      // Pan handlers
      canvas.addEventListener("mousedown", (event) => {
        isPanning = true;
        startX = event.clientX - translateX;
        startY = event.clientY - translateY;
      });

      canvas.addEventListener("mousemove", (event) => {
        if (isPanning) {
          translateX = event.clientX - startX;
          translateY = event.clientY - startY;
          renderCanvas();
        }
      });

      canvas.addEventListener("mouseup", () => {
        isPanning = false;
      });

      canvas.addEventListener("mouseleave", () => {
        isPanning = false;
      });

      // // Attach zoom buttons
      // document.getElementById("zoomIn").addEventListener("click", zoomIn);
      // document.getElementById("zoomOut").addEventListener("click", zoomOut);

      // Initial canvas setup
      const resizeCanvas = () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        renderCanvas();
      };
      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>